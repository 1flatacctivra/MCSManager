<div id="ApiKeyContainer">
    <p>
        <b>设置至关重要的接口密匙（API KEY）。</b>
    </p>
    <p><small>若此用户管理员用户，那么密匙将可以"创建/删除用户","创建/删除服务器","管理所有服务器"</small></p>
    <p><small>若此用户为普通用户，则仅仅能管理其名下的所有服务器。</small></p>

    <div class="input-group">
        <span class="input-group-addon">API KEY</span>
        <input type="text" class="form-control" v-model="API_KEY" placeholder="关闭" disabled="disabled">
    </div>

    <p style="color: rgb(230, 55, 55);">切勿泄露，安全至上，至关重要，不可泄露</p>

    <p>留空则代表关闭此用户 API 功能</p>
    <button class="btn btn-success" v-on:click="updateKey()">
        更新 KEY
    </button>
    <button class="btn btn-success" v-on:click="deleteKey()">
        删除/关闭 KEY
    </button>
    &nbsp;|&nbsp;
    <button class="btn btn-danger" v-on:click="TOOLS.popWindClose();">
        返回
    </button>
</div>
<script>
    new Vue({
        el: "#ApiKeyContainer",
        data: {
            API_KEY: ''
        },
        methods: {
            updateKey: function () {
                var that = this;
                WS.sendMsg('apikey/update', PAGE.username, function (obj) {
                    var API_KEY = obj.ResponseValue;
                    that.API_KEY = API_KEY;
                });
            },
            deleteKey: function () {
                var that = this;
                WS.sendMsg('apikey/delete', PAGE.username, function (obj) {
                    var API_KEY = obj.ResponseValue;
                    that.API_KEY = API_KEY;
                });
            }
        },
        mounted: function () {
            var that = this;
            WS.sendMsg('apikey/get', PAGE.username, function (obj) {
                var API_KEY = obj.ResponseValue;
                that.API_KEY = API_KEY;
            });
        }
    });
</script>